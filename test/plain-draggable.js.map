{"version":3,"sources":["webpack:///webpack/bootstrap 2f5d0869dd8dc026c60c","webpack:///./~/anim-event/src/anim-event.js","webpack:///./~/cssprefix/src/css-prefix.js","webpack:///./src/plain-draggable.js"],"names":["MSPF","KEEP_LOOP","requestAnim","window","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","cancelAnim","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","msCancelAnimationFrame","requestID","clearTimeout","tasks","lastFrameTime","Date","now","step","called","next","call","forEach","task","event","listener","indexOfTasks","index","some","i","AnimEvent","add","push","remove","iRemove","splice","length","CSSPrefix","PREFIXES","PREFIXES_PROP","PREFIXES_VALUE","rePrefixesProp","rePrefixesValue","props","values","ucf","text","substr","toUpperCase","prefix","RegExp","join","normalizeProp","prop","reUc","replace","str","p1","test","toLowerCase","normalizeValue","value","getProp","elm","style","ucfProp","prefixed","setValue","res","valueArray","Array","isArray","trySet","ZINDEX","SNAP_GRAVITY","SNAP_CORNER","SNAP_SIDE","SNAP_EDGE","SNAP_BASE","SNAP_ALL_CORNERS","SNAP_ALL_SIDES","SNAP_ALL_EDGES","IS_WEBKIT","chrome","document","documentElement","isObject","toString","fnToString","hasOwnProperty","objFnString","Object","proto","constr","obj","getPrototypeOf","constructor","isFinite","Number","insProps","insId","activeItem","hasMoved","pointerOffset","body","cssValueCursorDraggable","cssValueCursorDragging","cssOrgValueCursor","cssPropUserSelect","cssOrgValueUserSelect","cssWantedValueCursorDraggable","cssWantedValueCursorDragging","copyTree","keys","reduce","copyObj","key","map","hasChanged","a","b","typeA","keysA","sort","aVal","isElement","element","nodeType","Node","ELEMENT_NODE","getBoundingClientRect","compareDocumentPosition","DOCUMENT_POSITION_DISCONNECTED","validBBox","bBox","left","x","top","y","width","right","height","bottom","validPPValue","string2PPValue","inString","matches","exec","isRatio","parseFloat","ppValue2OptionValue","ppValue","validPPBBox","ppBBox2OptionObject","ppBBox","getBBox","getPaddingBox","rect","pageXOffset","pageYOffset","getComputedStyle","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","borderLeft","borderLeftWidth","initAnim","webkitTapHighlightColor","setCursorDraggable","cursor","setCursorDragging","move","position","cbCheck","elementBBox","fix","minLeft","maxLeft","minTop","maxTop","elementStyle","offset","moved","initBBox","curPosition","RESTORE_PROPS","orgStyle","orgSize","margin","newBBox","containmentBBox","containmentIsBBox","options","containment","parsedSnapTargets","docRect","elementSizeXY","minXY","maxXY","prop2Axis","xStart","xEnd","xStep","yStart","yEnd","yStep","snapTargets","parsedSnapTarget","baseRect","base","baseOriginXY","baseSizeXY","resolvedValue","baseOrigin","baseSize","addSnapTarget","targetXY","center","xGravity","gravity","yGravity","corners","corner","snapTarget","gravityXStart","gravityXEnd","gravityYStart","gravityYEnd","specAxis","rangeAxis","startProp","endProp","gravityProp","specAxisL","rangeAxisL","gravitySpecStartProp","gravitySpecEndProp","gravityRangeStartProp","gravityRangeEndProp","sides","xy","side","gravitySpecStart","gravitySpecEnd","edges","lengthenX","lengthenY","edge","defaultStart","defaultEnd","expanded","axis","stepProp","start","end","curValue","expandedXY","initBBoxDone","mousedown","disabled","handle","zIndex","pageX","pageY","dragEnd","orgZIndex","onDragEnd","setOptions","newOptions","needsInitBBox","commonSnapOptions","trim","added","split","cornersLen","snap","newSnapOptions","targets","snapTargetsOptions","snapOptions","target","isElementPre","ppBBoxPre","newSnapTargetOptions","expandedParsedSnapTargets","snapTargetOptions","newOptionsTarget","parsedXY","newOptionsXY","commonOptions","option","dragstart","preventDefault","orgCursor","removeEventListener","handleMousedown","addEventListener","needsMove","bind","ins","PlainDraggable","defineProperty","_id","Error","resizing","console","log","parent","parentNode","onDrag","onMove","onMoveStart","id","snappedX","snappedY","iLen","snapped","initBody"],"mappings":"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","file":"plain-draggable.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2f5d0869dd8dc026c60c","/*\n * AnimEvent\n * https://github.com/anseki/anim-event\n *\n * Copyright (c) 2017 anseki\n * Licensed under the MIT license.\n */\n\n// *** Currently, this code except `export` is not ES2015. ***\n\nvar\n  MSPF = 1000 / 60, // ms/frame (FPS: 60)\n  KEEP_LOOP = 500,\n\n  requestAnim = window.requestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function(callback) { setTimeout(callback, MSPF); },\n  cancelAnim = window.cancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.msCancelAnimationFrame ||\n    function(requestID) { clearTimeout(requestID); },\n\n  /**\n   * @typedef {Object} task\n   * @property {Event} event\n   * @property {function} listener\n   */\n\n  /** @type {task[]} */\n  tasks = [],\n  requestID, lastFrameTime = Date.now();\n\nfunction step() {\n  var called, next;\n\n  if (requestID) {\n    cancelAnim.call(window, requestID);\n    requestID = null;\n  }\n\n  tasks.forEach(function(task) {\n    if (task.event) {\n      task.listener(task.event);\n      task.event = null;\n      called = true;\n    }\n  });\n\n  if (called) {\n    lastFrameTime = Date.now();\n    next = true;\n  } else if (Date.now() - lastFrameTime < KEEP_LOOP) { // Go on for a while\n    next = true;\n  }\n  if (next) { requestID = requestAnim.call(window, step); }\n}\n\nfunction indexOfTasks(listener) {\n  var index = -1;\n  tasks.some(function(task, i) {\n    if (task.listener === listener) {\n      index = i;\n      return true;\n    }\n    return false;\n  });\n  return index;\n}\n\nvar AnimEvent = {\n  /**\n   * @param {function} listener - An event listener.\n   * @returns {(function|null)} - A wrapped event listener.\n   */\n  add: function(listener) {\n    var task;\n    if (indexOfTasks(listener) === -1) {\n      tasks.push((task = {listener: listener}));\n      return function(event) {\n        task.event = event;\n        if (!requestID) { step(); }\n      };\n    } else {\n      return null;\n    }\n  },\n\n  remove: function(listener) {\n    var iRemove;\n    if ((iRemove = indexOfTasks(listener)) > -1) {\n      tasks.splice(iRemove, 1);\n      if (!tasks.length && requestID) {\n        cancelAnim.call(window, requestID);\n        requestID = null;\n      }\n    }\n  }\n};\n\nexport default AnimEvent;\n\n\n\n// WEBPACK FOOTER //\n// ./~/anim-event/src/anim-event.js","/*\n * CSSPrefix\n * https://github.com/anseki/css-prefix\n *\n * Copyright (c) 2017 anseki\n * Licensed under the MIT license.\n */\n\n// *** Currently, this code except `export` is not ES2015. ***\n\nvar CSSPrefix,\n  PREFIXES = ['webkit', 'ms', 'moz', 'o'],\n  PREFIXES_PROP = [], PREFIXES_VALUE = [],\n  rePrefixesProp, rePrefixesValue,\n  props = {}, values = {}; // cache\n\nfunction ucf(text) { return text.substr(0, 1).toUpperCase() + text.substr(1); }\n\nPREFIXES.forEach(function(prefix) {\n  PREFIXES_PROP.push(prefix);\n  PREFIXES_PROP.push(ucf(prefix));\n  PREFIXES_VALUE.push('-' + prefix + '-');\n});\n\nrePrefixesProp = new RegExp('^(?:' + PREFIXES.join('|') + ')(.)', 'i');\nfunction normalizeProp(prop) {\n  var reUc = /[A-Z]/;\n  // 'ms' and 'Ms' are found by rePrefixesProp. 'i' option\n  return (prop = (prop + '').replace(/-([\\da-z])/gi, function(str, p1) { // camelCase\n    return p1.toUpperCase();\n  }).replace(rePrefixesProp, function(str, p1) {\n    return reUc.test(p1) ? p1.toLowerCase() : str;\n  })).toLowerCase() === 'float' ? 'cssFloat' : prop; // for old CSSOM\n}\n\nrePrefixesValue = new RegExp('^(?:' + PREFIXES_VALUE.join('|') + ')', 'i');\nfunction normalizeValue(value) {\n  return (value + '').replace(rePrefixesValue, '');\n}\n\nfunction getProp(prop, elm) {\n  var style, ucfProp;\n  prop = normalizeProp(prop);\n  if (props[prop] == null) {\n    style = elm.style;\n\n    if (style[prop] != null) { // original\n      props[prop] = prop;\n    } else { // try with prefixes\n      ucfProp = ucf(prop);\n      if (!PREFIXES_PROP.some(function(prefix) {\n        var prefixed = prefix + ucfProp;\n        if (style[prefixed] != null) {\n          props[prop] = prefixed;\n          return true;\n        }\n        return false;\n      })) {\n        props[prop] = '';\n      }\n    }\n\n  }\n  return props[prop];\n}\n\nfunction setValue(elm, prop, value) {\n  var res, style = elm.style,\n    valueArray = Array.isArray(value) ? value : [value];\n\n  function trySet(prop, value) {\n    style[prop] = value;\n    return style[prop] === value;\n  }\n\n  if (!(prop = getProp(prop, elm))) { return ''; } // Invalid Property\n  values[prop] = values[prop] || {};\n  if (!valueArray.some(function(value) {\n    value = normalizeValue(value);\n    if (values[prop][value] == null) {\n\n      if (trySet(prop, value)) { // original\n        res = values[prop][value] = value;\n        return true;\n      } else if (PREFIXES_VALUE.some(function(prefix) { // try with prefixes\n        var prefixed = prefix + value;\n        if (trySet(prop, prefixed)) {\n          res = values[prop][value] = prefixed;\n          return true;\n        }\n        return false;\n      })) {\n        return true;\n      } else {\n        values[prop][value] = '';\n        return false; // continue to next value\n      }\n\n    } else if (values[prop][value]) {\n      style[prop] = res = values[prop][value];\n      return true;\n    }\n    return false;\n  })) {\n    res = '';\n  }\n  return res;\n}\n\nCSSPrefix = {\n  getProp: getProp,\n  setValue: setValue\n};\n\nexport default CSSPrefix;\n\n\n\n// WEBPACK FOOTER //\n// ./~/cssprefix/src/css-prefix.js","/*\n * PlainDraggable\n * https://anseki.github.io/plain-draggable/\n *\n * Copyright (c) 2017 anseki\n * Licensed under the MIT license.\n */\n\nimport CSSPrefix from 'cssprefix';\nimport AnimEvent from 'anim-event';\n\nconst\n  ZINDEX = 99999,\n  SNAP_GRAVITY = 20, SNAP_CORNER = 'tl', SNAP_SIDE = 'both', SNAP_EDGE = 'both', SNAP_BASE = 'containment',\n  SNAP_ALL_CORNERS = ['tl', 'tr', 'bl', 'br'],\n  SNAP_ALL_SIDES = ['start', 'end'],\n  SNAP_ALL_EDGES = ['inside', 'outside'],\n\n  IS_WEBKIT = !window.chrome && 'WebkitAppearance' in document.documentElement.style,\n\n  isObject = (() => {\n    const toString = {}.toString, fnToString = {}.hasOwnProperty.toString,\n      objFnString = fnToString.call(Object);\n    return obj => {\n      let proto, constr;\n      return obj && toString.call(obj) === '[object Object]' &&\n        (!(proto = Object.getPrototypeOf(obj)) ||\n          (constr = proto.hasOwnProperty('constructor') && proto.constructor) &&\n          typeof constr === 'function' && fnToString.call(constr) === objFnString);\n    };\n  })(),\n  isFinite = Number.isFinite || (value => typeof value === 'number' && window.isFinite(value)),\n\n  /** @type {Object.<_id: number, props>} */\n  insProps = {};\n\nlet insId = 0,\n  activeItem, hasMoved, pointerOffset, body,\n  // CSS property/value\n  cssValueCursorDraggable, cssValueCursorDragging,\n  cssOrgValueCursor, cssPropUserSelect, cssOrgValueUserSelect,\n  // Try to set `cursor` property.\n  cssWantedValueCursorDraggable = IS_WEBKIT ? ['all-scroll', 'move'] : ['grab', 'all-scroll', 'move'],\n  cssWantedValueCursorDragging = IS_WEBKIT ? 'move' : ['grabbing', 'move'];\n\n// [DEBUG]\nwindow.insProps = insProps;\nwindow.IS_WEBKIT = IS_WEBKIT;\nwindow.SNAP_GRAVITY = SNAP_GRAVITY;\nwindow.SNAP_CORNER = SNAP_CORNER;\nwindow.SNAP_SIDE = SNAP_SIDE;\nwindow.SNAP_EDGE = SNAP_EDGE;\nwindow.SNAP_BASE = SNAP_BASE;\nwindow.SNAP_ALL_CORNERS = SNAP_ALL_CORNERS;\nwindow.SNAP_ALL_SIDES = SNAP_ALL_SIDES;\nwindow.SNAP_ALL_EDGES = SNAP_ALL_EDGES;\n// [/DEBUG]\n\nfunction copyTree(obj) {\n  return !obj ? obj :\n    isObject(obj) ? Object.keys(obj).reduce((copyObj, key) => {\n      copyObj[key] = copyTree(obj[key]);\n      return copyObj;\n    }, {}) :\n    Array.isArray(obj) ? obj.map(copyTree) : obj;\n}\n\nfunction hasChanged(a, b) {\n  let typeA, keysA;\n  return typeof a !== typeof b ||\n    (typeA = isObject(a) ? 'obj' : Array.isArray(a) ? 'array' : '') !==\n      (isObject(b) ? 'obj' : Array.isArray(b) ? 'array' : '') ||\n    (\n      typeA === 'obj' ?\n        hasChanged((keysA = Object.keys(a).sort()), Object.keys(b).sort()) ||\n          keysA.some(prop => hasChanged(a[prop], b[prop])) :\n      typeA === 'array' ?\n        a.length !== b.length || a.some((aVal, i) => hasChanged(aVal, b[i])) :\n      a !== b\n    );\n}\n\n/**\n * @param {Element} element - A target element.\n * @returns {boolean} - `true` if connected element.\n */\nfunction isElement(element) {\n  return !!(element &&\n    element.nodeType === Node.ELEMENT_NODE &&\n    // element instanceof HTMLElement &&\n    typeof element.getBoundingClientRect === 'function' &&\n    !(element.compareDocumentPosition(document) & Node.DOCUMENT_POSITION_DISCONNECTED));\n}\nwindow.isElement = isElement; // [DEBUG/]\n\n/**\n * An object that simulates `DOMRect` to indicate a bounding-box.\n * @typedef {Object} BBox\n * @property {(number|null)} left - document coordinate\n * @property {(number|null)} top - document coordinate\n * @property {(number|null)} right - document coordinate\n * @property {(number|null)} bottom - document coordinate\n * @property {(number|null)} x - Substitutes for left\n * @property {(number|null)} y - Substitutes for top\n * @property {(number|null)} width\n * @property {(number|null)} height\n */\n\n/**\n * @param {Object} bBox - A target object.\n * @returns {(BBox|null)} - A normalized `BBox`, or null if `bBox` is invalid.\n */\nfunction validBBox(bBox) {\n  if (!isObject(bBox)) { return null; }\n  let value;\n  if (isFinite((value = bBox.left)) || isFinite((value = bBox.x))) {\n    bBox.left = bBox.x = value;\n  } else { return null; }\n  if (isFinite((value = bBox.top)) || isFinite((value = bBox.y))) {\n    bBox.top = bBox.y = value;\n  } else { return null; }\n\n  if (isFinite(bBox.width) && bBox.width >= 0) {\n    bBox.right = bBox.left + bBox.width;\n  } else if (isFinite(bBox.right) && bBox.right >= bBox.left) {\n    bBox.width = bBox.right - bBox.left;\n  } else { return null; }\n  if (isFinite(bBox.height) && bBox.height >= 0) {\n    bBox.bottom = bBox.top + bBox.height;\n  } else if (isFinite(bBox.bottom) && bBox.bottom >= bBox.top) {\n    bBox.height = bBox.bottom - bBox.top;\n  } else { return null; }\n  return bBox;\n}\nwindow.validBBox = validBBox; // [DEBUG/]\n\n/**\n * A value that is Pixels or Ratio\n * @typedef {{value: number, isRatio: boolean}} PPValue\n */\n\nfunction validPPValue(value) {\n\n  // Get PPValue from string (all `/s` were already removed)\n  function string2PPValue(inString) {\n    const matches = /^(.+?)(\\%)?$/.exec(inString);\n    let value, isRatio;\n    return matches && isFinite((value = parseFloat(matches[1]))) ?\n      {value: (isRatio = !!(matches[2] && value)) ? value / 100 : value, isRatio: isRatio} : null; // 0% -> 0\n  }\n\n  return isFinite(value) ? {value: value, isRatio: false} :\n    typeof value === 'string' ? string2PPValue(value.replace(/\\s/g, '')) : null;\n}\nwindow.validPPValue = validPPValue; // [DEBUG/]\n\nfunction ppValue2OptionValue(ppValue) {\n  return ppValue.isRatio ? `${ppValue.value * 100}%` : ppValue.value;\n}\nwindow.ppValue2OptionValue = ppValue2OptionValue; // [DEBUG/]\n\n/**\n * An object that simulates BBox but properties are PPValue.\n * @typedef {Object} PPBBox\n */\n\n/**\n * @param {Object} bBox - A target object.\n * @returns {(PPBBox|null)} - A normalized `PPBBox`, or null if `bBox` is invalid.\n */\nfunction validPPBBox(bBox) {\n  if (!isObject(bBox)) { return null; }\n  let ppValue;\n  if ((ppValue = validPPValue(bBox.left)) || (ppValue = validPPValue(bBox.x))) {\n    bBox.left = bBox.x = ppValue;\n  } else { return null; }\n  if ((ppValue = validPPValue(bBox.top)) || (ppValue = validPPValue(bBox.y))) {\n    bBox.top = bBox.y = ppValue;\n  } else { return null; }\n\n  if ((ppValue = validPPValue(bBox.width)) && ppValue.value >= 0) {\n    bBox.width = ppValue;\n    delete bBox.right;\n  } else if ((ppValue = validPPValue(bBox.right))) {\n    bBox.right = ppValue;\n    delete bBox.width;\n  } else { return null; }\n  if ((ppValue = validPPValue(bBox.height)) && ppValue.value >= 0) {\n    bBox.height = ppValue;\n    delete bBox.bottom;\n  } else if ((ppValue = validPPValue(bBox.bottom))) {\n    bBox.bottom = ppValue;\n    delete bBox.height;\n  } else { return null; }\n  return bBox;\n}\nwindow.validPPBBox = validPPBBox; // [DEBUG/]\n\nfunction ppBBox2OptionObject(ppBBox) {\n  return Object.keys(ppBBox).reduce((obj, prop) => {\n    obj[prop] = ppValue2OptionValue(ppBBox[prop]);\n    return obj;\n  }, {});\n}\nwindow.ppBBox2OptionObject = ppBBox2OptionObject; // [DEBUG/]\n\n/**\n * @param {Element} element - A target element.\n * @param {boolean} [getPaddingBox] - Get padding-box instead of border-box as bounding-box.\n * @returns {BBox} - A bounding-box of `element`.\n */\nfunction getBBox(element, getPaddingBox) {\n  const rect = element.getBoundingClientRect(),\n    bBox = {left: rect.left, top: rect.top, width: rect.width, height: rect.height};\n  bBox.left += window.pageXOffset;\n  bBox.top += window.pageYOffset;\n  if (getPaddingBox) {\n    const style = window.getComputedStyle(element, ''),\n      borderTop = parseFloat(style.borderTopWidth) || 0,\n      borderRight = parseFloat(style.borderRightWidth) || 0,\n      borderBottom = parseFloat(style.borderBottomWidth) || 0,\n      borderLeft = parseFloat(style.borderLeftWidth) || 0;\n    bBox.left += borderLeft;\n    bBox.top += borderTop;\n    bBox.width -= borderLeft + borderRight;\n    bBox.height -= borderTop + borderBottom;\n  }\n  return validBBox(bBox);\n}\nwindow.getBBox = getBBox; // [DEBUG/]\n\n/**\n * Optimize an element for animation.\n * @param {Element} element - A target element.\n * @returns {Element} - A target element.\n */\nfunction initAnim(element) {\n  const style = element.style;\n  style.webkitTapHighlightColor = 'transparent';\n  style[CSSPrefix.getProp('transform', element)] = 'translateZ(0)';\n  style[CSSPrefix.getProp('boxShadow', element)] = '0 0 1px transparent';\n  return element;\n}\n\nfunction setCursorDraggable(element) {\n  if (cssValueCursorDraggable == null) {\n    cssValueCursorDraggable = CSSPrefix.setValue(element, 'cursor', cssWantedValueCursorDraggable);\n  } else {\n    element.style.cursor = cssValueCursorDraggable;\n  }\n}\n\nfunction setCursorDragging(element) {\n  if (cssValueCursorDragging == null) {\n    cssValueCursorDragging = CSSPrefix.setValue(element, 'cursor', cssWantedValueCursorDragging);\n  } else {\n    element.style.cursor = cssValueCursorDragging;\n  }\n}\n\n/**\n * Set `props.element` position.\n * @param {props} props - `props` of instance.\n * @param {{left: number, top: number}} position - New position.\n * @param {function} [cbCheck] - Callback that is called with valid position, cancel moving if it returns `false`.\n * @returns {boolean} `true` if it was moved.\n */\nfunction move(props, position, cbCheck) {\n  const elementBBox = props.elementBBox;\n\n  function fix() {\n    if (props.minLeft >= props.maxLeft) { // Disabled\n      position.left = elementBBox.left;\n    } else if (position.left < props.minLeft) {\n      position.left = props.minLeft;\n    } else if (position.left > props.maxLeft) {\n      position.left = props.maxLeft;\n    }\n    if (props.minTop >= props.maxTop) { // Disabled\n      position.top = elementBBox.top;\n    } else if (position.top < props.minTop) {\n      position.top = props.minTop;\n    } else if (position.top > props.maxTop) {\n      position.top = props.maxTop;\n    }\n  }\n\n  fix();\n  if (cbCheck) {\n    if (cbCheck(position) === false) { return false; }\n    fix(); // Again\n  }\n\n  const elementStyle = props.elementStyle, offset = props.offset;\n  let moved = false;\n  if (position.left !== elementBBox.left) {\n    elementStyle.left = position.left + offset.left + 'px';\n    moved = true;\n  }\n  if (position.top !== elementBBox.top) {\n    elementStyle.top = position.top + offset.top + 'px';\n    moved = true;\n  }\n  // Update elementBBox\n  if (moved) {\n    props.elementBBox = validBBox({left: position.left, top: position.top,\n      width: elementBBox.width, height: elementBBox.height});\n  }\n\n  return moved;\n}\n\n/**\n * Set `elementBBox`, `containmentBBox` and `min/max``Left/Top`.\n * @param {props} props - `props` of instance.\n * @returns {void}\n */\nfunction initBBox(props) {\n  const element = props.element, elementStyle = props.elementStyle;\n\n  // Get document offset.\n  const curPosition = getBBox(element),\n    RESTORE_PROPS = ['position', 'margin', 'width', 'height'];\n  if (!props.orgStyle) {\n    props.orgStyle = RESTORE_PROPS.reduce((orgStyle, prop) => {\n      orgStyle[prop] = elementStyle[prop] || '';\n      return orgStyle;\n    }, {});\n  } else {\n    RESTORE_PROPS.forEach(prop => { elementStyle[prop] = props.orgStyle[prop]; });\n  }\n  const orgSize = getBBox(element);\n  elementStyle.position = 'absolute';\n  elementStyle.left = elementStyle.top = elementStyle.margin = '0';\n  let newBBox = getBBox(element);\n  const offset = props.offset =\n    {left: newBBox.left ? -newBBox.left : 0, top: newBBox.top ? -newBBox.top : 0}; // avoid `-0`\n  // Restore position\n  elementStyle.left = curPosition.left + offset.left + 'px';\n  elementStyle.top = curPosition.top + offset.top + 'px';\n  // Restore size\n  ['width', 'height'].forEach(prop => {\n    if (newBBox[prop] !== orgSize[prop]) {\n      // Ignore `box-sizing`\n      elementStyle[prop] = orgSize[prop] + 'px';\n      newBBox = getBBox(element);\n      if (newBBox[prop] !== orgSize[prop]) {\n        elementStyle[prop] = orgSize[prop] - (newBBox[prop] - orgSize[prop]) + 'px';\n      }\n    }\n  });\n\n  const elementBBox = props.elementBBox = getBBox(element),\n    containmentBBox = props.containmentBBox =\n      props.containmentIsBBox ? props.options.containment : getBBox(props.options.containment, true),\n    minLeft = props.minLeft = containmentBBox.left,\n    maxLeft = props.maxLeft = containmentBBox.right - elementBBox.width,\n    minTop = props.minTop = containmentBBox.top,\n    maxTop = props.maxTop = containmentBBox.bottom - elementBBox.height;\n  // Adjust position\n  move(props, {left: elementBBox.left, top: elementBBox.top});\n\n  // Snap targets\n\n  /**\n   * @typedef {Object} SnapTarget\n   * @property {number} [x] - A coordinate it moves to. It has x or y or both.\n   * @property {number} [y]\n   * @property {number} [gravityXStart] - Gravity zone. It has *Start or *End or both, and *X* or *Y* or both.\n   * @property {number} [gravityXEnd]\n   * @property {number} [gravityYStart]\n   * @property {number} [gravityYEnd]\n   */\n\n  if (props.parsedSnapTargets) {\n    const docRect = document.documentElement.getBoundingClientRect(),\n      elementSizeXY = {x: elementBBox.width, y: elementBBox.height},\n      minXY = {x: minLeft, y: minTop}, maxXY = {x: maxLeft, y: maxTop},\n      prop2Axis = {left: 'x', right: 'x', x: 'x', width: 'x', xStart: 'x', xEnd: 'x', xStep: 'x',\n        top: 'y', bottom: 'y', y: 'y', height: 'y', yStart: 'y', yEnd: 'y', yStep: 'y'},\n\n      snapTargets = props.parsedSnapTargets.reduce((snapTargets, parsedSnapTarget) => {\n        const baseRect = parsedSnapTarget.base === 'containment' ? containmentBBox : docRect,\n          baseOriginXY = {x: baseRect.left, y: baseRect.top},\n          baseSizeXY = {x: baseRect.width, y: baseRect.height};\n\n        /**\n         * Basically, shallow copy from parsedSnapTarget, and it can have resolved values.\n         * @typedef {{x: (number|PPValue), y, xStart, xEnd, xStep, yStart, yEnd, yStep}} TargetXY\n         * @property {string[]} [corners] - Applied value.\n         * @property {string[]} [sides]\n         * @property {boolean} center\n         * @property {number} [xGravity] - Override parsedSnapTarget.gravity.\n         * @property {number} [yGravity]\n         */\n\n        function resolvedValue(ppValue, baseOrigin, baseSize) {\n          return typeof ppValue === 'number' ? ppValue :\n            baseOrigin + ppValue.value * (ppValue.isRatio ? baseSize : 1);\n        }\n\n        // Add single Point or Line (i.e. targetXY has no *Step)\n        function addSnapTarget(targetXY) {\n          if (targetXY.center == null) { targetXY.center = parsedSnapTarget.center; }\n          if (targetXY.xGravity == null) { targetXY.xGravity = parsedSnapTarget.gravity; }\n          if (targetXY.yGravity == null) { targetXY.yGravity = parsedSnapTarget.gravity; }\n\n          if (targetXY.x != null && targetXY.y != null) { // Point\n            targetXY.x = resolvedValue(targetXY.x, baseOriginXY.x, baseSizeXY.x);\n            targetXY.y = resolvedValue(targetXY.y, baseOriginXY.y, baseSizeXY.y);\n\n            if (targetXY.center) {\n              targetXY.x -= elementSizeXY.x / 2;\n              targetXY.y -= elementSizeXY.y / 2;\n              targetXY.corners = ['tl'];\n            }\n\n            (targetXY.corners || parsedSnapTarget.corners).forEach(corner => {\n              const x = targetXY.x - (corner === 'tr' || corner === 'br' ? elementSizeXY.x : 0),\n                y = targetXY.y - (corner === 'bl' || corner === 'br' ? elementSizeXY.y : 0);\n              if (x >= minXY.x && x <= maxXY.x && y >= minXY.y && y <= maxXY.y) {\n                const snapTarget = {x: x, y: y},\n                  gravityXStart = x - targetXY.xGravity,\n                  gravityXEnd = x + targetXY.xGravity,\n                  gravityYStart = y - targetXY.yGravity,\n                  gravityYEnd = y + targetXY.yGravity;\n                if (gravityXStart > minXY.x) { snapTarget.gravityXStart = gravityXStart; }\n                if (gravityXEnd < maxXY.x) { snapTarget.gravityXEnd = gravityXEnd; }\n                if (gravityYStart > minXY.y) { snapTarget.gravityYStart = gravityYStart; }\n                if (gravityYEnd < maxXY.y) { snapTarget.gravityYEnd = gravityYEnd; }\n                snapTargets.push(snapTarget);\n              }\n            });\n\n          } else { // Line\n            const specAxis = targetXY.x != null ? 'x' : 'y', rangeAxis = specAxis === 'x' ? 'y' : 'x',\n              startProp = `${rangeAxis}Start`, endProp = `${rangeAxis}End`,\n              gravityProp = `${specAxis}Gravity`,\n              specAxisL = specAxis.toUpperCase(), rangeAxisL = rangeAxis.toUpperCase(),\n              gravitySpecStartProp = `gravity${specAxisL}Start`,\n              gravitySpecEndProp = `gravity${specAxisL}End`,\n              gravityRangeStartProp = `gravity${rangeAxisL}Start`,\n              gravityRangeEndProp = `gravity${rangeAxisL}End`;\n            targetXY[specAxis] =\n              resolvedValue(targetXY[specAxis], baseOriginXY[specAxis], baseSizeXY[specAxis]);\n            targetXY[startProp] =\n              resolvedValue(targetXY[startProp], baseOriginXY[rangeAxis], baseSizeXY[rangeAxis]);\n            targetXY[endProp] =\n              resolvedValue(targetXY[endProp], baseOriginXY[rangeAxis], baseSizeXY[rangeAxis]) -\n              elementSizeXY[rangeAxis]; // Reduce the end of the line.\n            if (targetXY[startProp] > targetXY[endProp]) { return; } // Smaller than element size.\n\n            if (targetXY.center) {\n              targetXY[specAxis] -= elementSizeXY[specAxis] / 2;\n              targetXY.sides = ['start'];\n            }\n\n            (targetXY.sides || parsedSnapTarget.sides).forEach(side => {\n              const xy = targetXY[specAxis] - (side === 'end' ? elementSizeXY[specAxis] : 0);\n              if (xy >= minXY[specAxis] && xy <= maxXY[specAxis]) {\n                const snapTarget = {},\n                  gravitySpecStart = xy - targetXY[gravityProp],\n                  gravitySpecEnd = xy + targetXY[gravityProp];\n                snapTarget[specAxis] = xy;\n                if (gravitySpecStart > minXY[specAxis]) {\n                  snapTarget[gravitySpecStartProp] = gravitySpecStart;\n                }\n                if (gravitySpecEnd < maxXY[specAxis]) {\n                  snapTarget[gravitySpecEndProp] = gravitySpecEnd;\n                }\n                if (targetXY[startProp] > minXY[rangeAxis]) {\n                  snapTarget[gravityRangeStartProp] = targetXY[startProp];\n                }\n                if (targetXY[endProp] < maxXY[rangeAxis]) {\n                  snapTarget[gravityRangeEndProp] = targetXY[endProp];\n                }\n                snapTargets.push(snapTarget);\n              }\n            });\n          }\n        }\n\n        let bBox;\n        if ((bBox = parsedSnapTarget.element ? getBBox(parsedSnapTarget.element) : null) || // Element\n            parsedSnapTarget.ppBBox) {\n          if (parsedSnapTarget.ppBBox) { // PPBBox (It might be invalid)\n            bBox = validBBox(Object.keys(parsedSnapTarget.ppBBox).reduce((bBox, prop) => { // PPBBox -> BBox\n              bBox[prop] = resolvedValue(parsedSnapTarget.ppBBox[prop],\n                prop === 'width' || prop === 'height' ? 0 : baseOriginXY[prop2Axis[prop]],\n                baseSizeXY[prop2Axis[prop]]);\n              return bBox;\n            }, {}));\n          }\n          if (bBox) {\n            // Expand into 4 lines.\n            parsedSnapTarget.edges.forEach(edge => {\n              let lengthenX = parsedSnapTarget.gravity, lengthenY = parsedSnapTarget.gravity;\n              if (edge === 'outside') { // Snap it when a part of the element is part of the range.\n                lengthenX += elementBBox.width;\n                lengthenY += elementBBox.height;\n              }\n              const xStart = bBox.left - lengthenX, xEnd = bBox.right + lengthenX,\n                yStart = bBox.top - lengthenY, yEnd = bBox.bottom + lengthenY;\n              let side = edge === 'inside' ? 'start' : 'end';\n              addSnapTarget({xStart: xStart, xEnd: xEnd, y: bBox.top, sides: [side], center: false}); // Top\n              addSnapTarget({x: bBox.left, yStart: yStart, yEnd: yEnd, sides: [side], center: false}); // Left\n              side = edge === 'inside' ? 'end' : 'start';\n              addSnapTarget({xStart: xStart, xEnd: xEnd, y: bBox.bottom, sides: [side], center: false}); // Bottom\n              addSnapTarget({x: bBox.right, yStart: yStart, yEnd: yEnd, sides: [side], center: false}); // Right\n            });\n          }\n\n        } else {\n          const defaultStart = {\n              x: resolvedValue({value: 0, isRatio: false}, baseOriginXY.x, baseSizeXY.x),\n              y: resolvedValue({value: 0, isRatio: false}, baseOriginXY.y, baseSizeXY.y),\n            },\n            defaultEnd = {\n              x: resolvedValue({value: 1, isRatio: true}, baseOriginXY.x, baseSizeXY.x),\n              y: resolvedValue({value: 1, isRatio: true}, baseOriginXY.y, baseSizeXY.y),\n            };\n          let expanded = [\n            ['x', 'y', 'xStart', 'xEnd', 'xStep', 'yStart', 'yEnd', 'yStep'].reduce((targetXY, prop) => {\n              if (parsedSnapTarget[prop]) {\n                targetXY[prop] = resolvedValue(parsedSnapTarget[prop],\n                  prop === 'xStep' || prop === 'yStep' ? 0 : baseOriginXY[prop2Axis[prop]],\n                  baseSizeXY[prop2Axis[prop]]);\n              }\n              return targetXY;\n            }, {})\n          ];\n\n          ['x', 'y'].forEach(axis => {\n            const startProp = `${axis}Start`, endProp = `${axis}End`, stepProp = `${axis}Step`,\n              gravityProp = `${axis}Gravity`;\n            expanded = expanded.reduce((expanded, targetXY) => {\n              let start = targetXY[startProp], end = targetXY[endProp], step = targetXY[stepProp];\n\n              if (start != null && end != null && start >= end) { // start >= end -> {0, 100%}\n                start = defaultStart[axis];\n                end = defaultEnd[axis];\n              }\n\n              if (step != null && step >= 2) { // step >= 2px\n                // Expand by step\n                let gravity = step / 2; // max\n                gravity = parsedSnapTarget.gravity > gravity ? gravity : null;\n                for (let curValue = start; curValue <= end; curValue += step) {\n                  const expandedXY = Object.keys(targetXY).reduce((expandedXY, prop) => {\n                    if (prop !== startProp && prop !== endProp && prop !== stepProp) {\n                      expandedXY[prop] = targetXY[prop];\n                    }\n                    return expandedXY;\n                  }, {});\n                  expandedXY[axis] = curValue;\n                  expandedXY[gravityProp] = gravity;\n                  expanded.push(expandedXY);\n                }\n              } else {\n                expanded.push(targetXY);\n              }\n              return expanded;\n            }, []);\n          });\n          expanded.forEach(targetXY => { addSnapTarget(targetXY); });\n        }\n\n        return snapTargets;\n      }, []);\n\n    props.snapTargets = snapTargets.length ? snapTargets : null;\n  }\n  window.initBBoxDone = true; // [DEBUG/]\n}\n\nfunction mousedown(props, event) {\n  if (props.disabled) { return; }\n\n  setCursorDragging(props.options.handle);\n  if (props.options.zIndex !== false) { props.elementStyle.zIndex = props.options.zIndex; }\n  setCursorDragging(body);\n  if (cssPropUserSelect) { body.style[cssPropUserSelect] = 'none'; }\n\n  activeItem = props;\n  hasMoved = false;\n  pointerOffset = {left: props.elementBBox.left - event.pageX, top: props.elementBBox.top - event.pageY};\n}\n\nfunction dragEnd(props) {\n  setCursorDraggable(props.options.handle);\n  if (props.options.zIndex !== false) { props.elementStyle.zIndex = props.orgZIndex; }\n  body.style.cursor = cssOrgValueCursor;\n  if (cssPropUserSelect) { body.style[cssPropUserSelect] = cssOrgValueUserSelect; }\n\n  activeItem = null;\n  if (props.onDragEnd) { props.onDragEnd(); }\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @param {Object} newOptions - New options.\n * @returns {void}\n */\nfunction setOptions(props, newOptions) {\n  const options = props.options;\n  let needsInitBBox;\n\n  // containment\n  if (newOptions.containment) {\n    let bBox;\n    if (isElement(newOptions.containment)) { // Specific element\n      if (newOptions.containment !== options.containment) {\n        options.containment = newOptions.containment;\n        props.containmentIsBBox = false;\n        needsInitBBox = true;\n      }\n    } else if ((bBox = validBBox(copyTree(newOptions.containment))) && // bBox\n        hasChanged(bBox, options.containment)) {\n      options.containment = bBox;\n      props.containmentIsBBox = true;\n      needsInitBBox = true;\n    }\n  }\n\n  /**\n   * @typedef {Object} SnapOptions\n   * @property {SnapTargetOptions[]} targets\n   * @property {number} [gravity]\n   * @property {string} [corner]\n   * @property {string} [side]\n   * @property {boolean} [center]\n   * @property {string} [edge]\n   * @property {string} [base]\n   */\n\n  /**\n   * @typedef {Object} SnapTargetOptions\n   * @property {(number|string)} [x] - pixels | '<n>%' | {start, end} | {step, start, end}\n   * @property {(number|string)} [y]\n   * @property {(Element|Object)} [target] - Properties of Object are string or number from PPBBox.\n   * @property {number} [gravity]\n   * @property {string} [corner]\n   * @property {string} [side]\n   * @property {boolean} [center]\n   * @property {string} [edge]\n   * @property {string} [base]\n   */\n\n  /**\n   * @typedef {Object} ParsedSnapTarget\n   * @property {PPValue} [x] - (input: pixels | '<n>%')\n   * @property {PPValue} [y]\n   * @property {PPValue} [xStart] - (input: {start, end} | {step, start, end})\n   * @property {PPValue} [xEnd]\n   * @property {PPValue} [xStep] - (input: {step, start, end})\n   * @property {PPValue} [yStart]\n   * @property {PPValue} [yEnd]\n   * @property {PPValue} [yStep]\n   * @property {Element} [element]\n   * @property {PPBBox} [ppBBox]\n   * @property {number} gravity\n   * @property {string[]} corners\n   * @property {string[]} sides\n   * @property {boolean} center\n   * @property {string[]} edges\n   * @property {string} base\n   */\n\n  // Initialize `gravity`, `corner`, `side`, `center`, `edge`, `base`\n  function commonSnapOptions(options, newOptions) {\n    // gravity\n    if (isFinite(newOptions.gravity) && newOptions.gravity > 0) { options.gravity = newOptions.gravity; }\n    // corner\n    let corner = typeof newOptions.corner === 'string' ? newOptions.corner.trim().toLowerCase() : null;\n    if (corner) {\n      if (corner !== 'all') {\n        const added = {},\n          corners = corner.split(/\\s/).reduce((corners, corner) => {\n            corner = corner.trim().replace(/^(.).*?\\-(.).*$/, '$1$2');\n            if ((corner =\n                corner === 'tl' || corner === 'lt' ? 'tl' :\n                corner === 'tr' || corner === 'rt' ? 'tr' :\n                corner === 'bl' || corner === 'lb' ? 'bl' :\n                corner === 'br' || corner === 'rb' ? 'br' :\n                null) && !added[corner]) {\n              corners.push(corner);\n              added[corner] = true;\n            }\n            return corners;\n          }, []),\n          cornersLen = corners.length;\n        corner = !cornersLen ? null : cornersLen === 4 ? 'all' : corners.join(' ');\n      }\n      if (corner) { options.corner = corner; }\n    }\n    // side\n    const side = typeof newOptions.side === 'string' ? newOptions.side.trim().toLowerCase() : null;\n    if (side && (side === 'start' || side === 'end' || side === 'both')) { options.side = side; }\n    // center\n    if (typeof newOptions.center === 'boolean') { options.center = newOptions.center; }\n    // edge\n    const edge = typeof newOptions.edge === 'string' ? newOptions.edge.trim().toLowerCase() : null;\n    if (edge && (edge === 'inside' || edge === 'outside' || edge === 'both')) { options.edge = edge; }\n    // base\n    const base = typeof newOptions.base === 'string' ? newOptions.base.trim().toLowerCase() : null;\n    if (base && (base === 'containment' || base === 'document')) { options.base = base; }\n    return options;\n  }\n  window.commonSnapOptions = commonSnapOptions; // [DEBUG/]\n\n  // snap\n  if (newOptions.snap != null) {\n    const newSnapOptions =\n        isObject(newOptions.snap) && (newOptions.snap.targets != null) ? newOptions.snap :\n        {targets: newOptions.snap},\n      snapTargetsOptions = [],\n      snapOptions = commonSnapOptions({targets: snapTargetsOptions}, newSnapOptions);\n\n    // Set default options into top level.\n    if (!snapOptions.gravity) { snapOptions.gravity = SNAP_GRAVITY; }\n    if (!snapOptions.corner) { snapOptions.corner = SNAP_CORNER; }\n    if (!snapOptions.side) { snapOptions.side = SNAP_SIDE; }\n    if (typeof snapOptions.center !== 'boolean') { snapOptions.center = false; }\n    if (!snapOptions.edge) { snapOptions.edge = SNAP_EDGE; }\n    if (!snapOptions.base) { snapOptions.base = SNAP_BASE; }\n\n    const parsedSnapTargets = (\n        Array.isArray(newSnapOptions.targets) ? newSnapOptions.targets : [newSnapOptions.targets]\n      ).reduce((parsedSnapTargets, target) => {\n        if (target == null) { return parsedSnapTargets; }\n\n        const isElementPre = isElement(target), // Pre-check direct value\n          ppBBoxPre = validPPBBox(copyTree(target)), // Pre-check direct value\n          newSnapTargetOptions =\n            isElementPre || ppBBoxPre ? {target: target} : // Direct Element | PPBBox\n            isObject(target) &&\n              target.start == null && target.end == null && target.step == null ? target : // SnapTargetOptions\n            {x: target, y: target}, // Others, it might be {step, start, end}\n          expandedParsedSnapTargets = [],\n          snapTargetOptions = {},\n          newOptionsTarget = newSnapTargetOptions.target;\n        let ppBBox;\n\n        if (isElementPre || isElement(newOptionsTarget)) { // Element\n          expandedParsedSnapTargets.push({element: newOptionsTarget});\n          snapTargetOptions.target = newOptionsTarget;\n        } else if ((ppBBox = ppBBoxPre || validPPBBox(copyTree(newOptionsTarget)))) { // Object -> PPBBox\n          expandedParsedSnapTargets.push({ppBBox: ppBBox});\n          snapTargetOptions.target = ppBBox2OptionObject(ppBBox);\n\n        } else {\n          const parsedXY = ['x', 'y'].reduce((parsedXY, axis) => {\n            const newOptionsXY = newSnapTargetOptions[axis];\n            let ppValue;\n\n            if ((ppValue = validPPValue(newOptionsXY))) { // pixels | '<n>%'\n              parsedXY[axis] = ppValue;\n              snapTargetOptions[axis] = ppValue2OptionValue(ppValue);\n\n            } else { // {start, end} | {step, start, end}\n              let start, end, step;\n              if (isObject(newOptionsXY)) {\n                start = validPPValue(newOptionsXY.start);\n                end = validPPValue(newOptionsXY.end);\n                step = validPPValue(newOptionsXY.step);\n                if (start && end && start.isRatio === end.isRatio && start.value >= end.value) { // start >= end\n                  start = end = null; // {0, 100%}\n                }\n              }\n              start = parsedXY[`${axis}Start`] = start || {value: 0, isRatio: false};\n              end = parsedXY[`${axis}End`] = end || {value: 1, isRatio: true};\n              snapTargetOptions[axis] = {start: ppValue2OptionValue(start), end: ppValue2OptionValue(end)};\n              if (step && (step.isRatio ? step.value > 0 : step.value >= 2)) { // step > 0% || step >= 2px\n                parsedXY[`${axis}Step`] = step;\n                snapTargetOptions[axis].step = ppValue2OptionValue(step);\n              }\n            }\n            return parsedXY;\n          }, {});\n\n          if (parsedXY.xStart && !parsedXY.xStep && parsedXY.yStart && !parsedXY.yStep) {\n            // Expand into 4 lines. This is not BBox, and `edge` is ignored.\n            expandedParsedSnapTargets.push(\n              {xStart: parsedXY.xStart, xEnd: parsedXY.xEnd, y: parsedXY.yStart}, // Top\n              {xStart: parsedXY.xStart, xEnd: parsedXY.xEnd, y: parsedXY.yEnd}, // Bottom\n              {x: parsedXY.xStart, yStart: parsedXY.yStart, yEnd: parsedXY.yEnd}, // Left\n              {x: parsedXY.xEnd, yStart: parsedXY.yStart, yEnd: parsedXY.yEnd} // Right\n            );\n          } else {\n            expandedParsedSnapTargets.push(parsedXY);\n          }\n        }\n\n        if (expandedParsedSnapTargets.length) {\n          snapTargetsOptions.push(commonSnapOptions(snapTargetOptions, newSnapTargetOptions));\n          // Copy common SnapOptions\n          const corner = snapTargetOptions.corner || snapOptions.corner,\n            side = snapTargetOptions.side || snapOptions.side,\n            edge = snapTargetOptions.edge || snapOptions.edge,\n            commonOptions = {\n              gravity: snapTargetOptions.gravity || snapOptions.gravity,\n              base: snapTargetOptions.base || snapOptions.base,\n              center: typeof snapTargetOptions.center === 'boolean' ?\n                snapTargetOptions.center : snapOptions.center,\n              corners: corner === 'all' ? SNAP_ALL_CORNERS : corner.split(' '), // Split\n              sides: side === 'both' ? SNAP_ALL_SIDES : [side], // Split\n              edges: edge === 'both' ? SNAP_ALL_EDGES : [edge] // Split\n            };\n          expandedParsedSnapTargets.forEach(parsedSnapTarget => {\n            // Set common SnapOptions\n            ['gravity', 'corners', 'sides', 'center', 'edges', 'base'].forEach(\n              option => { parsedSnapTarget[option] = commonOptions[option]; });\n            parsedSnapTargets.push(parsedSnapTarget);\n          });\n        }\n        return parsedSnapTargets;\n      }, []);\n\n    if (parsedSnapTargets.length) {\n      options.snap = snapOptions; // Update always\n      if (hasChanged(parsedSnapTargets, props.parsedSnapTargets)) {\n        props.parsedSnapTargets = parsedSnapTargets;\n        needsInitBBox = true;\n      }\n    }\n  } else if (newOptions.hasOwnProperty('snap') && props.parsedSnapTargets) {\n    options.snap = props.parsedSnapTargets = props.snapTargets = void 0;\n  }\n\n  if (needsInitBBox) { initBBox(props); }\n\n  // Gecko, Trident pick drag-event of some elements such as img, a, etc.\n  function dragstart(event) { event.preventDefault(); }\n\n  // handle\n  if (isElement(newOptions.handle) && newOptions.handle !== options.handle) {\n    if (options.handle) { // Restore\n      options.handle.style.cursor = props.orgCursor;\n      options.handle.removeEventListener('dragstart', dragstart, false);\n      options.handle.removeEventListener('mousedown', props.handleMousedown, false);\n    }\n    const handle = options.handle = newOptions.handle;\n    props.orgCursor = handle.style.cursor;\n    setCursorDraggable(handle);\n    handle.addEventListener('dragstart', dragstart, false);\n    handle.addEventListener('mousedown', props.handleMousedown, false);\n  }\n\n  // zIndex\n  if (isFinite(newOptions.zIndex) || newOptions.zIndex === false) {\n    options.zIndex = newOptions.zIndex;\n  }\n\n  // left/top\n  const position = {left: props.elementBBox.left, top: props.elementBBox.top};\n  let needsMove;\n  if (isFinite(newOptions.left) && newOptions.left !== position.left) {\n    position.left = newOptions.left;\n    needsMove = true;\n  }\n  if (isFinite(newOptions.top) && newOptions.top !== position.top) {\n    position.top = newOptions.top;\n    needsMove = true;\n  }\n  if (needsMove) { move(props, position); }\n\n  // Event listeners\n  ['onDrag', 'onMove', 'onMoveStart', 'onDragEnd'].forEach(option => {\n    if (typeof newOptions[option] === 'function') {\n      options[option] = newOptions[option];\n      props[option] = options[option].bind(props.ins);\n    } else if (newOptions.hasOwnProperty(option) && newOptions[option] == null) {\n      options[option] = props[option] = void 0;\n    }\n  });\n}\n\nclass PlainDraggable {\n  /**\n   * Create a `PlainDraggable` instance.\n   * @param {Element} element - Target element.\n   * @param {Object} [options] - Options.\n   */\n  constructor(element, options) {\n    const props = {\n      ins: this,\n      options: { // Initial options (not default)\n        zIndex: ZINDEX // Initial state.\n      },\n      disabled: false\n    };\n\n    Object.defineProperty(this, '_id', {value: ++insId});\n    props._id = this._id;\n    insProps[this._id] = props;\n\n    if (!isElement(element) || element === body) { throw new Error('This element is not accepted.'); }\n    if (!options) {\n      options = {};\n    } else if (!isObject(options)) {\n      throw new Error('Invalid options.');\n    }\n\n    props.element = initAnim(element);\n    props.elementStyle = element.style;\n    props.orgZIndex = props.elementStyle.zIndex;\n    // Event listeners for handle element, to be removed.\n    props.handleMousedown = event => { mousedown(props, event); };\n\n    // Gecko bug, multiple calling (parallel) by `requestAnimationFrame`.\n    props.resizing = false;\n    window.addEventListener('resize', AnimEvent.add(() => {\n      if (props.resizing) {\n        console.log('`resize` event listener is already running.'); // [DEBUG/]\n        return;\n      }\n      props.resizing = true;\n      initBBox(props);\n      props.resizing = false;\n    }), true);\n\n    // Default options\n    if (!options.containment) {\n      let parent;\n      options.containment = (parent = element.parentNode) && isElement(parent) ? parent : body;\n    }\n    if (!options.handle) { options.handle = element; }\n\n    setOptions(props, options);\n  }\n\n  /**\n   * @param {Object} options - New options.\n   * @returns {PlainDraggable} Current instance itself.\n   */\n  setOptions(options) {\n    if (isObject(options)) {\n      setOptions(insProps[this._id], options);\n    }\n    return this;\n  }\n\n  position() {\n    initBBox(insProps[this._id]);\n    return this;\n  }\n\n  get disabled() {\n    return insProps[this._id].disabled;\n  }\n  set disabled(value) {\n    const props = insProps[this._id];\n    value = !!value;\n    if (value !== props.disabled) {\n      props.disabled = value;\n      if (props.disabled) {\n        if (props === activeItem) { dragEnd(props); }\n        props.options.handle.style.cursor = props.orgCursor;\n      } else {\n        setCursorDraggable(props.options.handle);\n      }\n    }\n  }\n\n  get element() {\n    return insProps[this._id].element;\n  }\n\n  get bBox() {\n    return copyTree(insProps[this._id].elementBBox);\n  }\n\n  get left() { return insProps[this._id].elementBBox.left; }\n  set left(value) { setOptions(insProps[this._id], {left: value}); }\n\n  get top() { return insProps[this._id].elementBBox.top; }\n  set top(value) { setOptions(insProps[this._id], {top: value}); }\n\n  get containment() {\n    const props = insProps[this._id];\n    return props.containmentIsBBox ? copyTree(props.options.containment) : props.options.containment;\n  }\n  set containment(value) { setOptions(insProps[this._id], {containment: value}); }\n\n  get snap() { return copyTree(insProps[this._id].options.snap); }\n  set snap(value) { setOptions(insProps[this._id], {snap: value}); }\n\n  get handle() { return insProps[this._id].options.handle; }\n  set handle(value) { setOptions(insProps[this._id], {handle: value}); }\n\n  get zIndex() { return insProps[this._id].options.zIndex; }\n  set zIndex(value) { setOptions(insProps[this._id], {zIndex: value}); }\n\n  get onDrag() { return insProps[this._id].options.onDrag; }\n  set onDrag(value) { setOptions(insProps[this._id], {onDrag: value}); }\n\n  get onMove() { return insProps[this._id].options.onMove; }\n  set onMove(value) { setOptions(insProps[this._id], {onMove: value}); }\n\n  get onMoveStart() { return insProps[this._id].options.onMoveStart; }\n  set onMoveStart(value) { setOptions(insProps[this._id], {onMoveStart: value}); }\n\n  get onDragEnd() { return insProps[this._id].options.onDragEnd; }\n  set onDragEnd(value) { setOptions(insProps[this._id], {onDragEnd: value}); }\n\n  static get cursorDraggable() {\n    return cssWantedValueCursorDraggable;\n  }\n  static set cursorDraggable(value) {\n    cssWantedValueCursorDraggable = value;\n    // Reset\n    cssValueCursorDraggable = null;\n    Object.keys(insProps).forEach(id =>{\n      const props = insProps[id];\n      if (!props.disabled && props !== activeItem) {\n        setCursorDraggable(props.options.handle);\n      }\n    });\n  }\n\n  static get cursorDragging() {\n    return cssWantedValueCursorDragging;\n  }\n  static set cursorDragging(value) {\n    cssWantedValueCursorDragging = value;\n    // Reset\n    cssValueCursorDragging = null;\n    if (activeItem) {\n      setCursorDragging(activeItem.options.handle);\n    }\n  }\n}\n\ndocument.addEventListener('mousemove', AnimEvent.add(event => {\n  if (activeItem &&\n      move(activeItem, {\n        left: event.pageX + pointerOffset.left,\n        top: event.pageY + pointerOffset.top\n      },\n      activeItem.snapTargets ? position => { // Snap\n        let snappedX = false, snappedY = false, i, iLen = activeItem.snapTargets.length;\n        for (i = 0; i < iLen && (!snappedX || !snappedY); i++) {\n          const snapTarget = activeItem.snapTargets[i];\n          if ((snapTarget.gravityXStart == null || position.left >= snapTarget.gravityXStart) &&\n              (snapTarget.gravityXEnd == null || position.left <= snapTarget.gravityXEnd) &&\n              (snapTarget.gravityYStart == null || position.top >= snapTarget.gravityYStart) &&\n              (snapTarget.gravityYEnd == null || position.top <= snapTarget.gravityYEnd)) {\n            if (!snappedX && snapTarget.x != null) {\n              position.left = snapTarget.x;\n              snappedX = true;\n              i = -1; // Restart loop\n            }\n            if (!snappedY && snapTarget.y != null) {\n              position.top = snapTarget.y;\n              snappedY = true;\n              i = -1; // Restart loop\n            }\n          }\n        }\n        position.snapped = snappedX || snappedY;\n        return activeItem.onDrag ? activeItem.onDrag(position) : true;\n      } : activeItem.onDrag)) {\n\n    if (!hasMoved) {\n      hasMoved = true;\n      if (activeItem.onMoveStart) { activeItem.onMoveStart(); }\n    }\n    if (activeItem.onMove) { activeItem.onMove(); }\n  }\n}), false);\n\ndocument.addEventListener('mouseup', () => { // It might occur outside body.\n  if (activeItem) { dragEnd(activeItem); }\n}, false);\n\n{\n  function initBody() {\n    cssOrgValueCursor = body.style.cursor;\n    if ((cssPropUserSelect = CSSPrefix.getProp('userSelect', body))) {\n      cssOrgValueUserSelect = body.style[cssPropUserSelect];\n    }\n  }\n\n  if ((body = document.body)) {\n    initBody();\n  } else {\n    document.addEventListener('DOMContentLoaded', () => {\n      body = document.body;\n      initBody();\n    }, false);\n  }\n}\n\nexport default PlainDraggable;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plain-draggable.js"],"sourceRoot":""}